/*
 * This file is generated by Entity Class Compiler, (c) CroTeam 1997-98
 */

#line 2 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"

#include "StdH.h"
#include "EntitiesMP/BackgroundViewer.h"
#include "EntitiesMP/WorldSettingsController.h"
#include "EntitiesMP/Common/PathFinding.h"
#include "EntitiesMP/NavigationMarker.h"
#include "ModelsMP/Enemies/ExotechLarva/ExotechLarva.h"
#include "ModelsMP/Enemies/ExotechLarva/Body.h"
#include "ModelsMP/Enemies/ExotechLarva/Arm.h"
#include "ModelsMP/Enemies/ExotechLarva/BackArms.h"
#include "ModelsMP/Enemies/ExotechLarva/Weapons/PlasmaGun.h"

#include <EntitiesMP/ExotechLarva.h>
#include <EntitiesMP/ExotechLarva_tables.h>
CEntityEvent *ELarvaArmDestroyed::MakeCopy(void) { CEntityEvent *peeCopy = new ELarvaArmDestroyed(*this); return peeCopy;}
ELarvaArmDestroyed::ELarvaArmDestroyed() : CEntityEvent(EVENTCODE_ELarvaArmDestroyed) {;
 ClearToDefault(iArm);
};
CEntityEvent *ELarvaRechargePose::MakeCopy(void) { CEntityEvent *peeCopy = new ELarvaRechargePose(*this); return peeCopy;}
ELarvaRechargePose::ELarvaRechargePose() : CEntityEvent(EVENTCODE_ELarvaRechargePose) {;
 ClearToDefault(bStart);
};
#line 37 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"

// info structure
static EntityInfo eiExotechLarva = {
  EIBT_FLESH, 9999999999.9f,
  0.0f, -1.0f, 0.0f,     // source (eyes)
  0.0f, -1.5f, 0.0f,     // target (body)
  };

#define MF_MOVEZ    (1L<<0)

#define LARVA_HANDLE_TRANSLATE 4.4f
#define FIREPOS_PLASMA_RIGHT  FLOAT3D(+3.08f, -1.20f+LARVA_HANDLE_TRANSLATE, -0.16f)
#define FIREPOS_PLASMA_LEFT   FLOAT3D(-3.08f, -1.20f+LARVA_HANDLE_TRANSLATE, -0.16f)
#define FIREPOS_LASER_RIGHT   FLOAT3D(+2.31f,  0.16f+LARVA_HANDLE_TRANSLATE, -3.57f)
#define FIREPOS_LASER_LEFT    FLOAT3D(-2.20f,  0.18f+LARVA_HANDLE_TRANSLATE, -3.57f)
#define FIREPOS_TAIL          FLOAT3D( 0.00f, -2.64f+LARVA_HANDLE_TRANSLATE, -0.22f)
//#define FIREPOS_MOUTH         FLOAT3D( 0.00f, -0.75f, -2.09f)


// PERCENT_RIGHTBLOW has to be greater then PERCENT_LEFTBLOW or some things
// won't work correctly
#define PERCENT_RIGHTBLOW   0.6666f
#define PERCENT_LEFTBLOW    0.3333f

#define ARM_LEFT    (1L<<0)
#define ARM_RIGHT   (1L<<1)


void CExotechLarva::SetDefaultProperties(void) {
  m_penMarkerNew = NULL;
  m_penMarkerOld = NULL;
  m_fStopRadius = 25.0f;
  m_fStretch = 2.5f;
  m_fLarvaHealth = 20000.0f;
  m_fRechargePerSecond = 100.0f;
  m_ltTarget = LT_ENEMY ;
  m_penFirstRechargeTarget = NULL;
  m_bRechargedAtLeastOnce = FALSE ;
  m_vFirePosLeftPlasmaRel = FLOAT3D(0.0f , 0.0f , 0.0f);
  m_vFirePosRightPlasmaRel = FLOAT3D(0.0f , 0.0f , 0.0f);
  m_vFirePosTailRel = FLOAT3D(0.0f , 0.0f , 0.0f);
  m_vFirePosLeftLaserAbs = FLOAT3D(0.0f , 0.0f , 0.0f);
  m_vFirePosRightLaserAbs = FLOAT3D(0.0f , 0.0f , 0.0f);
  m_bLeftArmActive = TRUE ;
  m_bRightArmActive = TRUE ;
  m_iExplodingArm = 1;
  m_fMaxRechargedHealth = 1.0f;
  m_bExploding = FALSE ;
  m_bActive = TRUE ;
  m_bRechargePose = FALSE ;
  m_bLaserActive = FALSE ;
  m_bInitialMove = TRUE ;
  m_penRecharger = NULL;
  m_tmLastTargateChange = 0.0f;
  m_plExpArmPos = CPlacement3D(FLOAT3D (0 , 0 , 0) , ANGLE3D (0 , 0 , 0));
  m_aExpArmRot = FLOAT3D(0.0f , 0.0f , 0.0f);
  m_plExpGunPos = CPlacement3D(FLOAT3D (0 , 0 , 0) , ANGLE3D (0 , 0 , 0));
  m_aExpGunRot = FLOAT3D(0.0f , 0.0f , 0.0f);
  m_vExpDamage = FLOAT3D(0.0f , 0.0f , 0.0f);
  m_iExplosions = 0;
  m_iRnd = 0;
  m_bRecharging = FALSE ;
  m_penDeathInflictor = NULL;
  m_tmDontFireLaserBefore = 0.0f;
  m_fMinimumLaserWait = 5.0f;
  m_bRenderLeftLaser = FALSE ;
  m_bRenderRightLaser = FALSE ;
  m_vLeftLaserTarget = FLOAT3D(0.0f , 0.0f , 0.0f);
  m_vRightLaserTarget = FLOAT3D(0.0f , 0.0f , 0.0f);
  m_bInvulnerable = FALSE ;
  m_penLeftArmDestroyTarget = NULL;
  m_penRightArmDestroyTarget = NULL;
  m_penDeathTarget = NULL;
  m_soFire1.SetOwner(this);
m_soFire1.Stop_internal();
  m_soFire2.SetOwner(this);
m_soFire2.Stop_internal();
  m_soFire3.SetOwner(this);
m_soFire3.Stop_internal();
  m_soVoice.SetOwner(this);
m_soVoice.Stop_internal();
  m_soChirp.SetOwner(this);
m_soChirp.Stop_internal();
  m_soLaser.SetOwner(this);
m_soLaser.Stop_internal();
  CEnemyBase::SetDefaultProperties();
}
  
#line 190 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
BOOL CExotechLarva::IsTargetValid(SLONG slPropertyOffset,CEntity * penTarget) 
#line 191 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
{
#line 192 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(slPropertyOffset  == offsetof  (CExotechLarva  , m_penMarkerNew ))
#line 193 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
{
#line 194 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(IsOfClass  (penTarget  , "NavigationMarker")){return TRUE ;}
#line 195 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
else {return FALSE ;}
#line 196 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 197 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(slPropertyOffset  == offsetof  (CExotechLarva  , m_penRecharger ))
#line 198 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
{
#line 199 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(IsOfClass  (penTarget  , "ExotechLarvaCharger")){return TRUE ;}
#line 200 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
else {return FALSE ;}
#line 201 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 202 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
return CEntity  :: IsTargetValid  (slPropertyOffset  , penTarget );
#line 203 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
  
#line 205 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
BOOL CExotechLarva::DoSafetyChecks(void) {
#line 206 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(m_penMarkerNew  == NULL ){
#line 207 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
WarningMessage  ("First ExotechLarva marker not set! Destroying Larva...\n");
#line 208 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
return FALSE ;
#line 209 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 210 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(m_penRecharger  == NULL ){
#line 211 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
WarningMessage  ("ExotechLarva Recharger target not set! Destroying Larva...\n");
#line 212 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
return FALSE ;
#line 213 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 214 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
return TRUE ;
#line 215 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
  
#line 217 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
void CExotechLarva::FindNewTarget() {
#line 220 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(m_penEnemy  != NULL ){
#line 221 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(m_penEnemy  -> GetFlags  () & ENF_ALIVE  && ! (m_penEnemy  -> GetFlags  () & ENF_DELETED )){
#line 222 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
return ;
#line 223 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 224 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 227 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
INDEX ctMaxPlayers  = GetMaxPlayers  ();
#line 228 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CEntity  * penPlayer ;
#line 230 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
for(INDEX i  = 0;i  < ctMaxPlayers ;i  ++){
#line 231 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
penPlayer  = GetPlayerEntity  (i );
#line 232 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(penPlayer  != NULL  && DistanceTo  (this  , penPlayer ) < 200.0f){
#line 234 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(penPlayer  != NULL  && (penPlayer  -> GetFlags  () & ENF_ALIVE ) && 
#line 235 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
! (penPlayer  -> GetFlags  () & ENF_DELETED )){
#line 236 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_penEnemy  = penPlayer ;
#line 237 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 238 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 239 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 240 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
  
#line 242 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
BOOL CExotechLarva::AnyPlayerCloserThen(FLOAT fDistance) {
#line 244 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
BOOL bClose  = FALSE ;
#line 247 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
INDEX ctMaxPlayers  = GetMaxPlayers  ();
#line 248 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CEntity  * penPlayer ;
#line 250 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
for(INDEX i  = 0;i  < ctMaxPlayers ;i  ++){
#line 251 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
penPlayer  = GetPlayerEntity  (i );
#line 252 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(penPlayer  != NULL ){
#line 253 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if((penPlayer  -> GetFlags  () & ENF_ALIVE ) && 
#line 254 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
! (penPlayer  -> GetFlags  () & ENF_DELETED ) && 
#line 255 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
DistanceTo  (this  , penPlayer ) < fDistance )
#line 256 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
{
#line 257 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
bClose  = TRUE ;
#line 258 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 259 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 260 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 261 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
return bClose ;
#line 262 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
  
#line 264 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
void CExotechLarva::PerhapsChangeTarget() {
#line 266 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(! m_penEnemy ){return ;}
#line 268 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(m_tmLastTargateChange  + 5.0f < _pTimer  -> CurrentTick  ()){
#line 269 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
MaybeSwitchToAnotherPlayer  ();
#line 270 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_tmLastTargateChange  = _pTimer  -> CurrentTick  ();
#line 271 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 272 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
  
#line 274 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
class CWorldSettingsController * CExotechLarva::GetWSC(void) 
#line 275 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
{
#line 276 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CWorldSettingsController  * pwsc  = NULL ;
#line 278 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CBackgroundViewer  * penBcgViewer  = (CBackgroundViewer  *) GetWorld  () -> GetBackgroundViewer  ();
#line 279 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(penBcgViewer  != NULL ){
#line 281 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
pwsc  = (CWorldSettingsController  *) & * penBcgViewer  -> m_penWorldSettingsController ;
#line 282 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 283 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
return pwsc ;
#line 284 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
  
#line 287 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
void CExotechLarva::ShakeItBaby(FLOAT tmShaketime,FLOAT fPower,BOOL bFadeIn) 
#line 288 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
{
#line 289 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CWorldSettingsController  * pwsc  = GetWSC  ();
#line 290 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(pwsc  != NULL ){
#line 291 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
pwsc  -> m_tmShakeStarted  = tmShaketime ;
#line 292 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
pwsc  -> m_vShakePos  = GetPlacement  () . pl_PositionVector ;
#line 293 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
pwsc  -> m_fShakeFalloff  = 450.0f;
#line 294 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
pwsc  -> m_fShakeFade  = 3.0f;
#line 296 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
pwsc  -> m_fShakeIntensityZ  = 0;
#line 297 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
pwsc  -> m_tmShakeFrequencyZ  = 5.0f;
#line 298 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
pwsc  -> m_fShakeIntensityY  = 0.1f * fPower ;
#line 299 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
pwsc  -> m_tmShakeFrequencyY  = 5.0f;
#line 300 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
pwsc  -> m_fShakeIntensityB  = 2.5f * fPower ;
#line 301 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
pwsc  -> m_tmShakeFrequencyB  = 7.2f;
#line 303 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
pwsc  -> m_bShakeFadeIn  = bFadeIn ;
#line 304 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 305 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
  
#line 307 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
void CExotechLarva::ShootTailProjectile(void) {
#line 309 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(m_penEnemy  == NULL ){return ;}
#line 312 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
EntityInfo  * peiTarget  = (EntityInfo  *) (m_penEnemy  -> GetEntityInfo  ());
#line 313 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
FLOAT3D vShootTarget ;
#line 314 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
GetEntityInfoPosition  (m_penEnemy  , peiTarget  -> vTargetCenter  , vShootTarget );
#line 317 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CPlacement3D pl ;
#line 318 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PreparePropelledProjectile  (pl  , vShootTarget  , m_vFirePosTailRel  , ANGLE3D (0 , - 10 , 0));
#line 319 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CEntityPointer penProjectile  = CreateEntity  (pl  , CLASS_LARVAOFFSPRING );
#line 320 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ELaunchLarvaOffspring  ello ;
#line 321 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ello  . penLauncher  = this ;
#line 322 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
penProjectile  -> Initialize  (ello );
#line 323 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
  
#line 325 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
BOOL CExotechLarva::IsOnMarker(CEntity * penMarker) {
#line 327 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(penMarker  == NULL ){return FALSE ;}
#line 328 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(DistanceTo  (this  , penMarker ) < 0.1f){return TRUE ;}
#line 330 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
return FALSE ;
#line 331 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
  
#line 333 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
FLOAT CExotechLarva::DistanceXZ(CEntity * E1,CEntity * E2) 
#line 334 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
{
#line 335 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
FLOAT3D vE1pos  = E1  -> GetPlacement  () . pl_PositionVector ;
#line 336 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
FLOAT3D vE2pos  = E2  -> GetPlacement  () . pl_PositionVector ;
#line 337 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
vE1pos  (2) = 0.0f;
#line 338 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
vE2pos  (2) = 0.0f;
#line 339 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
return (vE2pos  - vE1pos ) . Length  ();
#line 340 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
  
#line 342 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
void CExotechLarva::SpawnWingDebris() 
#line 343 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
{
#line 344 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
FLOAT3D vTranslation  = m_vExpDamage  + en_vCurrentTranslationAbsolute ;
#line 346 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
Debris_Begin  (EIBT_FLESH  , DPT_BLOODTRAIL  , BET_BLOODSTAIN  , 1.0f , m_vExpDamage  , en_vCurrentTranslationAbsolute  , 5.0f , 2.0f);
#line 347 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
Debris_Spawn_Independent  (this  , this  , MODEL_WING  , TEXTURE_WING  , 0 , 0 , 0 , 0 , m_fStretch  , 
#line 348 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_plExpArmPos  , vTranslation  , m_aExpArmRot );
#line 349 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
vTranslation  += FLOAT3D (FRnd  () * 4.0f - 2.0f , FRnd  () * 4.0f - 2.0f , FRnd  () * 4.0f - 2.0f);
#line 350 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
Debris_Spawn_Independent  (this  , this  , MODEL_PLASMAGUN  , TEXTURE_PLASMAGUN  , 0 , 0 , 0 , 0 , m_fStretch  , 
#line 351 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_plExpGunPos  , vTranslation  , m_aExpGunRot );
#line 352 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
  
#line 355 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
void CExotechLarva::ReceiveDamage(CEntity * penInflictor,enum DamageType dmtType,
#line 356 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
FLOAT fDamageAmmount,const FLOAT3D & vHitPoint,const FLOAT3D & vDirection) 
#line 357 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
{
#line 359 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(m_bInvulnerable ){
#line 360 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
return ;
#line 361 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 364 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(IsOfClass  (penInflictor  , "ExotechLarva")){
#line 365 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
return ;
#line 366 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 370 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(dmtType  == DMT_BULLET  && fDamageAmmount  > 100.0f)
#line 371 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
{
#line 372 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
fDamageAmmount  *= 0.66f;
#line 373 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 375 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(dmtType  == DMT_CANNONBALL )
#line 376 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
{
#line 377 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
fDamageAmmount  *= 0.5f;
#line 378 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 382 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
FLOAT fHealthNow  = GetHealth  ();
#line 383 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
FLOAT fHealthAfter  = GetHealth  () - fDamageAmmount ;
#line 384 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
FLOAT fHealthBlow01  = m_fMaxHealth  * PERCENT_RIGHTBLOW ;
#line 385 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
FLOAT fHealthBlow02  = m_fMaxHealth  * PERCENT_LEFTBLOW ;
#line 388 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
fDamageAmmount  *= DamageStrength  (((EntityInfo  *) GetEntityInfo  ()) -> Eeibt  , dmtType );
#line 390 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
fDamageAmmount  *= GetGameDamageMultiplier  ();
#line 393 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(fHealthNow  > fHealthBlow01  && fHealthAfter  < fHealthBlow02 ){
#line 394 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
fDamageAmmount  = fHealthNow  - fHealthBlow01  - 1;
#line 395 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}else if(m_bExploding ){
#line 397 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(fHealthNow  > fHealthBlow02  && fHealthAfter  < fHealthBlow02 ){
#line 398 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
fDamageAmmount  = fHealthNow  - fHealthBlow02  - 1;
#line 400 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}else if(fHealthAfter  < 0.0f){
#line 401 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
fDamageAmmount  = fHealthNow  - 1;
#line 402 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 403 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}else if(fHealthNow  > fHealthBlow02  && fHealthAfter  < 0){
#line 404 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
fDamageAmmount  = fHealthNow  - 1;
#line 405 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 408 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(fDamageAmmount  == 0){
#line 410 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
return ;
#line 411 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 414 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CPlacement3D plSpray  = CPlacement3D (vHitPoint  , ANGLE3D (0 , 0 , 0));
#line 415 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_penSpray  = CreateEntity  (plSpray  , CLASS_BLOOD_SPRAY );
#line 416 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ESpawnSpray  eSpawnSpray ;
#line 417 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnSpray  . colBurnColor  = C_WHITE  | CT_OPAQUE ;
#line 418 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(m_fMaxDamageAmmount  > 10.0f)
#line 419 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
{
#line 420 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnSpray  . fDamagePower  = 3.0f;
#line 421 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 422 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
else if(m_fSprayDamage  + fDamageAmmount  > 50.0f)
#line 423 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
{
#line 424 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnSpray  . fDamagePower  = 2.0f;
#line 425 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 426 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
else 
#line 427 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
{
#line 428 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnSpray  . fDamagePower  = 1.0f;
#line 429 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 430 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
switch(IRnd  () % 4){
#line 431 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
case 0: case 1: case 2: 
#line 433 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_penSpray  -> SetParent  (this );
#line 434 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnSpray  . sptType  = SPT_BLOOD ;
#line 435 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
break ;
#line 436 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
case 3: 
#line 438 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnSpray  . sptType  = SPT_ELECTRICITY_SPARKS ;
#line 439 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
break ;
#line 440 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 441 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnSpray  . fSizeMultiplier  = 1.0f;
#line 443 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
FLOAT3D vHitPointRelative  = vHitPoint  - GetPlacement  () . pl_PositionVector ;
#line 444 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
FLOAT3D vReflectingNormal ;
#line 445 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
GetNormalComponent  (vHitPointRelative  , en_vGravityDir  , vReflectingNormal );
#line 446 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
vReflectingNormal  . Normalize  ();
#line 448 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
vReflectingNormal  (1) /= 5.0f;
#line 450 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
FLOAT3D vProjectedComponent  = vReflectingNormal  * (vDirection  % vReflectingNormal );
#line 451 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
FLOAT3D vSpilDirection  = vDirection  - vProjectedComponent  * 2.0f - en_vGravityDir  * 0.5f;
#line 453 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnSpray  . vDirection  = vSpilDirection ;
#line 454 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnSpray  . penOwner  = this ;
#line 457 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_penSpray  -> Initialize  (eSpawnSpray );
#line 458 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_tmSpraySpawned  = _pTimer  -> CurrentTick  ();
#line 459 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_fSprayDamage  = 0.0f;
#line 460 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_fMaxDamageAmmount  = 0.0f;
#line 468 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
en_fHealth  -= fDamageAmmount ;
#line 470 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(en_fHealth  <= 0){
#line 472 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
EDeath  eDeath ;
#line 473 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SendEvent  (eDeath );
#line 474 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 476 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(m_bRightArmActive ){
#line 477 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(GetHealth  () < m_fMaxHealth  * PERCENT_RIGHTBLOW ){
#line 478 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ELarvaArmDestroyed  ead ;
#line 479 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ead  . iArm  = ARM_RIGHT ;
#line 480 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SendEvent  (ead );
#line 481 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_bExploding  = TRUE ;
#line 482 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 483 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 484 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(m_bLeftArmActive ){
#line 485 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(GetHealth  () < m_fMaxHealth  * PERCENT_LEFTBLOW ){
#line 486 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ELarvaArmDestroyed  ead ;
#line 487 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ead  . iArm  = ARM_LEFT ;
#line 488 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SendEvent  (ead );
#line 489 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_bExploding  = TRUE ;
#line 490 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 491 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 494 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_colBurning  = COLOR (C_WHITE  | CT_OPAQUE );
#line 496 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
  CTString CExotechLarva::GetPlayerKillDescription(const CTString & strPlayerName,const EDeath & eDeath) {
#line 499 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CTString str ;
#line 500 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
str  . PrintF  (TRANS  ("Exotech larva reduced %s to pulp.") , strPlayerName );
#line 501 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
return str ;
#line 502 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
  
#line 505 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
void * CExotechLarva::GetEntityInfo(void) {
#line 506 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
return & eiExotechLarva ;
#line 507 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
  const CTFileName & CExotechLarva::GetComputerMessageName(void)const {
#line 510 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
static DECLARE_CTFILENAME  (fnmLarva  , "DataMP\\Messages\\Enemies\\ExotechLarva.txt");
#line 511 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
return fnmLarva ;
#line 512 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
  
#line 514 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
void CExotechLarva::Precache(void) {
#line 515 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CEnemyBase  :: Precache  ();
#line 517 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PrecacheClass  (CLASS_BASIC_EFFECT  , BET_ROCKET );
#line 518 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PrecacheClass  (CLASS_BASIC_EFFECT  , BET_CANNON );
#line 519 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PrecacheClass  (CLASS_BLOOD_SPRAY );
#line 520 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PrecacheClass  (CLASS_PROJECTILE  , PRT_LARVA_TAIL_PROJECTILE );
#line 521 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PrecacheClass  (CLASS_PROJECTILE  , PRT_LARVA_PLASMA );
#line 523 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PrecacheModel  (MODEL_EXOTECHLARVA );
#line 524 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PrecacheTexture  (TEXTURE_EXOTECHLARVA );
#line 525 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PrecacheModel  (MODEL_BODY );
#line 526 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PrecacheTexture  (TEXTURE_BODY );
#line 527 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PrecacheModel  (MODEL_BEAM );
#line 528 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PrecacheTexture  (TEXTURE_BEAM );
#line 529 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PrecacheModel  (MODEL_ENERGYBEAMS );
#line 530 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PrecacheTexture  (TEXTURE_ENERGYBEAMS );
#line 531 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PrecacheModel  (MODEL_FLARE );
#line 532 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PrecacheTexture  (TEXTURE_FLARE );
#line 533 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PrecacheModel  (MODEL_WING );
#line 534 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PrecacheTexture  (TEXTURE_WING );
#line 535 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PrecacheModel  (MODEL_PLASMAGUN );
#line 536 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PrecacheTexture  (TEXTURE_PLASMAGUN );
#line 538 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PrecacheModel  (MODEL_BLADES );
#line 539 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PrecacheModel  (MODEL_DEBRIS_BODY );
#line 540 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PrecacheModel  (MODEL_DEBRIS_TAIL01 );
#line 541 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PrecacheModel  (MODEL_DEBRIS_TAIL02 );
#line 543 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PrecacheModel  (MODEL_DEBRIS_FLESH );
#line 544 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PrecacheTexture  (TEXTURE_DEBRIS_FLESH );
#line 545 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PrecacheModel  (MODEL_PLASMA );
#line 546 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PrecacheTexture  (TEXTURE_PLASMA );
#line 547 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PrecacheModel  (MODEL_BODY );
#line 548 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PrecacheTexture  (TEXTURE_BODY );
#line 550 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PrecacheSound  (SOUND_FIRE_PLASMA );
#line 551 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PrecacheSound  (SOUND_FIRE_TAIL );
#line 552 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PrecacheSound  (SOUND_LASER_CHARGE );
#line 553 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PrecacheSound  (SOUND_DEATH );
#line 554 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PrecacheSound  (SOUND_ARMDESTROY );
#line 555 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PrecacheSound  (SOUND_CHIRP );
#line 556 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PrecacheSound  (SOUND_DEPLOYLASER );
#line 558 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
  
#line 561 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CModelObject * CExotechLarva::PlasmaLeftModel(void) {
#line 562 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CAttachmentModelObject  * amo  = GetModelObject  () -> GetAttachmentModel  (BODY_ATTACHMENT_ARM_LEFT );
#line 563 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
amo  = amo  -> amo_moModelObject  . GetAttachmentModel  (ARM_ATTACHMENT_PLASMAGUN );
#line 564 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
return & (amo  -> amo_moModelObject );
#line 565 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
  
#line 566 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CModelObject * CExotechLarva::PlasmaRightModel(void) {
#line 567 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CAttachmentModelObject  * amo  = GetModelObject  () -> GetAttachmentModel  (BODY_ATTACHMENT_ARM_RIGHT );
#line 568 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
amo  = amo  -> amo_moModelObject  . GetAttachmentModel  (ARM_ATTACHMENT_PLASMAGUN );
#line 569 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
return & (amo  -> amo_moModelObject );
#line 570 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
  
#line 572 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
BOOL CExotechLarva::RechargerActive() {
#line 573 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(((CExotechLarvaCharger  *) & * m_penRecharger ) -> m_bActive ){
#line 574 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
return TRUE ;
#line 575 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 576 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
return FALSE ;
#line 577 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
  
#line 639 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
void CExotechLarva::RemoveWing(INDEX iArm) {
#line 641 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(iArm  == ARM_RIGHT ){
#line 642 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
RemoveAttachmentFromModel  (* GetModelObject  () , BODY_ATTACHMENT_ARM_RIGHT );
#line 643 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 645 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(iArm  == ARM_LEFT ){
#line 646 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
RemoveAttachmentFromModel  (* GetModelObject  () , BODY_ATTACHMENT_ARM_LEFT );
#line 647 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 648 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
  
#line 650 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ANGLE CExotechLarva::GetArmsPitch(void) {
#line 651 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(m_bLeftArmActive ){
#line 652 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CAttachmentModelObject  & amo  = * GetModelObject  () -> GetAttachmentModel  (BODY_ATTACHMENT_ARM_LEFT );
#line 653 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
return (amo  . amo_plRelative  . pl_OrientationAngle  (2) + GetPlacement  () . pl_OrientationAngle  (2));
#line 654 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 655 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
return 0.0f;
#line 656 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
  
#line 658 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ULONG CExotechLarva::SetDesiredMovement(void) 
#line 659 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
{
#line 660 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ULONG  ulFlags  = 0;
#line 661 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
FLOAT3D vPos ;
#line 662 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CEntity  * penMarker  = m_penMarkerNew ;
#line 663 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CEntity  * penTarget ;
#line 665 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(m_ltTarget  == LT_ENEMY  && m_penEnemy ){penTarget  = m_penEnemy ;}
#line 666 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
else if(m_ltTarget  == LT_RECHARGER ){penTarget  = m_penRecharger ;}
#line 667 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
else {return ulFlags ;}
#line 671 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(IsOnMarker  (m_penMarkerNew )){
#line 672 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PATH_FindNextMarker  (penTarget  , GetPlacement  () . pl_PositionVector  , 
#line 673 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
penTarget  -> GetPlacement  () . pl_PositionVector  , penMarker  , vPos );
#line 674 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(penMarker  != NULL ){
#line 676 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_penMarkerOld  = m_penMarkerNew ;
#line 678 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_penMarkerNew  = penMarker ;
#line 679 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 680 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
MoveToMarker  (m_penMarkerNew );
#line 681 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ulFlags  |= MF_MOVEZ ;
#line 682 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}else {
#line 683 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
MoveToMarker  (m_penMarkerNew );
#line 684 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ulFlags  |= MF_MOVEZ ;
#line 685 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 687 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(m_ltTarget  == LT_ENEMY  && DistanceTo  (this  , penTarget ) < m_fStopRadius ){
#line 688 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ForceFullStop  ();
#line 689 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 691 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
return ulFlags ;
#line 692 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
  
#line 694 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
void CExotechLarva::MoveToMarker(CEntity * penMarker) {
#line 695 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(penMarker  == NULL ){return ;}
#line 696 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
FLOAT3D vDesiredDir  = penMarker  -> GetPlacement  () . pl_PositionVector  - 
#line 697 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
GetPlacement  () . pl_PositionVector ;
#line 698 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(vDesiredDir  . Length  () > 0.0f){
#line 699 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
vDesiredDir  . Normalize  ();
#line 700 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
FLOAT3D vSpeed  = vDesiredDir  * m_fAttackRunSpeed ;
#line 701 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SetDesiredTranslation  (vSpeed );
#line 702 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 703 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
  
#line 706 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
void CExotechLarva::PreMoving() {
#line 708 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(m_bActive  && ! m_bRenderLeftLaser  && ! m_bRenderRightLaser ){
#line 711 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(m_penEnemy  != NULL ){
#line 713 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
FLOAT3D vToEnemy ;
#line 714 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
vToEnemy  = (m_penEnemy  -> GetPlacement  () . pl_PositionVector  - 
#line 715 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
GetPlacement  () . pl_PositionVector ) . Normalize  ();
#line 716 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ANGLE3D aAngle ;
#line 717 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
DirectionVectorToAngles  (vToEnemy  , aAngle );
#line 718 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
aAngle  (1) = aAngle  (1) - GetPlacement  () . pl_OrientationAngle  (1);
#line 719 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
aAngle  (1) = NormalizeAngle  (aAngle  (1));
#line 720 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SetDesiredRotation  (FLOAT3D (aAngle  (1) * 2.0f , 0.0f , 0.0f));
#line 721 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}else {
#line 722 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SetDesiredRotation  (FLOAT3D (0.0f , 0.0f , 0.0f));
#line 723 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 726 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(en_vCurrentTranslationAbsolute  . Length  () * _pTimer  -> TickQuantum  * 2.0f > 
#line 727 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
DistanceTo  (this  , m_penMarkerNew )){
#line 728 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
FLOAT3D vToMarker  = m_penMarkerNew  -> GetPlacement  () . pl_PositionVector  - 
#line 729 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
GetPlacement  () . pl_PositionVector ;
#line 730 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SetDesiredTranslation  (vToMarker  / _pTimer  -> TickQuantum );
#line 731 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 734 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(IsOnMarker  (m_penMarkerNew )){
#line 735 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ForceStopTranslation  ();
#line 736 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 737 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}else {
#line 738 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ForceFullStop  ();
#line 739 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 741 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CEnemyBase  :: PreMoving  ();
#line 742 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
  
#line 744 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
void CExotechLarva::RenderParticles(void) 
#line 745 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
{
#line 747 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
FLOATmatrix3D m ;
#line 748 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CPlacement3D plLarva ;
#line 750 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(m_bRenderLeftLaser  || m_bRenderRightLaser ){
#line 751 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
plLarva  = GetLerpedPlacement  ();
#line 752 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
MakeRotationMatrix  (m  , plLarva  . pl_OrientationAngle );
#line 753 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 755 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(m_bRenderLeftLaser ){
#line 756 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
FLOAT3D vSource  = (FIREPOS_LASER_LEFT  * m_fStretch ) * m  + plLarva  . pl_PositionVector ;
#line 757 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
Particles_ExotechLarvaLaser  (this  , vSource  , m_vLeftLaserTarget );
#line 758 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 759 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(m_bRenderRightLaser ){
#line 760 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
FLOAT3D vSource  = (FIREPOS_LASER_RIGHT  * m_fStretch ) * m  + plLarva  . pl_PositionVector ;
#line 761 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
Particles_ExotechLarvaLaser  (this  , vSource  , m_vRightLaserTarget );
#line 762 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 763 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(m_bRechargePose  && ((CExotechLarvaCharger  *) & * m_penRecharger ) -> m_bBeamActive )
#line 764 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
{
#line 765 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
Particles_LarvaEnergy  (this  , FLOAT3D (0.0f , LARVA_HANDLE_TRANSLATE  , 0.0f) * m_fStretch );
#line 766 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 767 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
  
#line 769 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
void CExotechLarva::SizeModel(void) 
#line 770 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
{
#line 771 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
return ;
#line 772 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
  
#line 774 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
void CExotechLarva::UpdateFiringPos() {
#line 775 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_vFirePosLeftLaserAbs  = (FIREPOS_LASER_LEFT  * m_fStretch ) * GetRotationMatrix  () + GetPlacement  () . pl_PositionVector ;
#line 776 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_vFirePosRightLaserAbs  = (FIREPOS_LASER_RIGHT  * m_fStretch ) * GetRotationMatrix  () + GetPlacement  () . pl_PositionVector ;
#line 777 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
  
#line 779 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
void CExotechLarva::BlowUp(void) 
#line 780 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
{
#line 781 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
NOTHING ;
#line 782 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
  
#line 785 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
void CExotechLarva::EnemyPostInit(void) 
#line 786 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
{
#line 787 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_soFire1  . Set3DParameters  (600.0f , 150.0f , 2.0f , 1.0f);
#line 788 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_soFire2  . Set3DParameters  (600.0f , 150.0f , 2.0f , 1.0f);
#line 789 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_soFire3  . Set3DParameters  (600.0f , 150.0f , 2.0f , 1.0f);
#line 790 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_soVoice  . Set3DParameters  (600.0f , 150.0f , 2.0f , 1.0f);
#line 791 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_soChirp  . Set3DParameters  (150.0f , 50.0f , 2.0f , 1.0f);
#line 792 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_soLaser  . Set3DParameters  (300.0f , 200.0f , 3.0f , 1.0f);
#line 793 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
  
#line 795 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
void CExotechLarva::FireLaser(void) 
#line 796 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
{
#line 798 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
FLOAT3D vLaserTarget ;
#line 800 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(! m_penEnemy ){return ;}
#line 802 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(IsVisible  (m_penEnemy )){
#line 803 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
vLaserTarget  = m_penEnemy  -> GetPlacement  () . pl_PositionVector ;
#line 804 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}else if(TRUE ){
#line 805 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
vLaserTarget  = m_vPlayerSpotted ;
#line 806 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 809 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CCastRay  crRay1  (this  , m_vFirePosLeftLaserAbs  , vLaserTarget );
#line 810 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
crRay1  . cr_fTestR  = 0.10f;
#line 811 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
crRay1  . cr_bHitTranslucentPortals  = FALSE ;
#line 812 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
crRay1  . cr_bPhysical  = FALSE ;
#line 813 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
crRay1  . cr_ttHitModels  = CCastRay  :: TT_COLLISIONBOX ;
#line 814 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
GetWorld  () -> CastRay  (crRay1 );
#line 817 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(crRay1  . cr_penHit  != NULL ){
#line 818 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_bRenderLeftLaser  = TRUE ;
#line 819 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_vLeftLaserTarget  = crRay1  . cr_vHit ;
#line 822 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
InflictDirectDamage  (crRay1  . cr_penHit  , this  , DMT_BURNING  , 25.0f , 
#line 823 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
FLOAT3D (0 , 0 , 0) , (m_vFirePosLeftLaserAbs  - m_vLeftLaserTarget ) . Normalize  ());
#line 825 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(crRay1  . cr_penHit  -> GetRenderType  () != RT_BRUSH ){
#line 826 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
crRay1  . cr_ttHitModels  = CCastRay  :: TT_NONE ;
#line 827 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
GetWorld  () -> ContinueCast  (crRay1 );
#line 828 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(crRay1  . cr_penHit  != NULL ){
#line 829 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_vLeftLaserTarget  = crRay1  . cr_vHit ;
#line 830 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 831 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 832 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}else if(TRUE ){
#line 833 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_bRenderLeftLaser  = FALSE ;
#line 834 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 837 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CCastRay  crRay2  (this  , m_vFirePosRightLaserAbs  , vLaserTarget );
#line 838 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
crRay2  . cr_fTestR  = 0.10f;
#line 839 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
crRay2  . cr_bHitTranslucentPortals  = FALSE ;
#line 840 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
crRay2  . cr_bPhysical  = FALSE ;
#line 841 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
crRay2  . cr_ttHitModels  = CCastRay  :: TT_COLLISIONBOX ;
#line 842 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
GetWorld  () -> CastRay  (crRay2 );
#line 845 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(crRay2  . cr_penHit  != NULL ){
#line 846 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_bRenderRightLaser  = TRUE ;
#line 847 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_vRightLaserTarget  = crRay2  . cr_vHit ;
#line 850 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
InflictDirectDamage  (crRay2  . cr_penHit  , this  , DMT_BURNING  , 25.0f , 
#line 851 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
FLOAT3D (0 , 0 , 0) , (m_vFirePosRightLaserAbs  - m_vRightLaserTarget ) . Normalize  ());
#line 853 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(crRay2  . cr_penHit  -> GetRenderType  () != RT_BRUSH ){
#line 854 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
crRay2  . cr_ttHitModels  = CCastRay  :: TT_NONE ;
#line 855 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
GetWorld  () -> ContinueCast  (crRay2 );
#line 856 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(crRay2  . cr_penHit  != NULL ){
#line 857 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_vRightLaserTarget  = crRay2  . cr_vHit ;
#line 858 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 859 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 860 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}else if(TRUE ){
#line 861 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_bRenderRightLaser  = FALSE ;
#line 862 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 863 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
  
#line 865 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
void CExotechLarva::ExplodeLaser(void) 
#line 866 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
{
#line 867 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(m_bRenderLeftLaser ){
#line 868 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ESpawnEffect  eSpawnEffect ;
#line 869 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnEffect  . colMuliplier  = C_WHITE  | CT_OPAQUE ;
#line 870 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnEffect  . betType  = BET_CANNON ;
#line 871 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnEffect  . vStretch  = FLOAT3D (m_fStretch  * 0.5 , m_fStretch  * 0.5 , m_fStretch  * 0.5);
#line 872 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CEntityPointer penExplosion  = CreateEntity  (CPlacement3D (m_vLeftLaserTarget  , 
#line 873 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ANGLE3D (0.0f , 0.0f , 0.0f)) , CLASS_BASIC_EFFECT );
#line 874 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
penExplosion  -> Initialize  (eSpawnEffect );
#line 877 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnEffect  . betType  = BET_EXPLOSION_DEBRIS ;
#line 878 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
penExplosion  = CreateEntity  (CPlacement3D (m_vLeftLaserTarget  , 
#line 879 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ANGLE3D (0.0f , 0.0f , 0.0f)) , CLASS_BASIC_EFFECT );
#line 880 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
penExplosion  -> Initialize  (eSpawnEffect );
#line 883 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnEffect  . betType  = BET_EXPLOSION_SMOKE ;
#line 884 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
penExplosion  = CreateEntity  (CPlacement3D (m_vLeftLaserTarget  , 
#line 885 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ANGLE3D (0.0f , 0.0f , 0.0f)) , CLASS_BASIC_EFFECT );
#line 886 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
penExplosion  -> Initialize  (eSpawnEffect );
#line 888 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
InflictRangeDamage  (this  , DMT_EXPLOSION  , 25.0f , 
#line 889 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_vLeftLaserTarget  , 5.0f , 25.0f);
#line 890 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 892 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(m_bRenderRightLaser ){
#line 893 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ESpawnEffect  eSpawnEffect ;
#line 894 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnEffect  . colMuliplier  = C_WHITE  | CT_OPAQUE ;
#line 895 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnEffect  . betType  = BET_CANNON ;
#line 896 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnEffect  . vStretch  = FLOAT3D (m_fStretch  * 0.5 , m_fStretch  * 0.5 , m_fStretch  * 0.5);
#line 897 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CEntityPointer penExplosion  = CreateEntity  (CPlacement3D (m_vLeftLaserTarget  , 
#line 898 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ANGLE3D (0.0f , 0.0f , 0.0f)) , CLASS_BASIC_EFFECT );
#line 899 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
penExplosion  -> Initialize  (eSpawnEffect );
#line 902 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnEffect  . betType  = BET_EXPLOSION_DEBRIS ;
#line 903 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
penExplosion  = CreateEntity  (CPlacement3D (m_vLeftLaserTarget  , 
#line 904 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ANGLE3D (0.0f , 0.0f , 0.0f)) , CLASS_BASIC_EFFECT );
#line 905 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
penExplosion  -> Initialize  (eSpawnEffect );
#line 908 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnEffect  . betType  = BET_EXPLOSION_SMOKE ;
#line 909 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
penExplosion  = CreateEntity  (CPlacement3D (m_vLeftLaserTarget  , 
#line 910 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ANGLE3D (0.0f , 0.0f , 0.0f)) , CLASS_BASIC_EFFECT );
#line 911 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
penExplosion  -> Initialize  (eSpawnEffect );
#line 913 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
InflictRangeDamage  (this  , DMT_EXPLOSION  , 25.0f , 
#line 914 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_vLeftLaserTarget  , 5.0f , 25.0f);
#line 915 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 916 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
BOOL CExotechLarva::
#line 926 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
BeWounded(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT STATE_CExotechLarva_BeWounded
  ASSERTMSG(__eeInput.ee_slEvent==EVENTCODE_EDamage, "CExotechLarva::BeWounded expects 'EDamage' as input!");  const EDamage &eDamage = (const EDamage &)__eeInput;
#line 927 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
Return(STATE_CURRENT,EReturn  ());
#line 927 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
return TRUE; ASSERT(FALSE); return TRUE;};BOOL CExotechLarva::
#line 930 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ArmExplosion(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT STATE_CExotechLarva_ArmExplosion
  ASSERTMSG(__eeInput.ee_slEvent==EVENTCODE_EVoid, "CExotechLarva::ArmExplosion expects 'EVoid' as input!");  const EVoid &e = (const EVoid &)__eeInput;
#line 932 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
FLOATmatrix3D mRot ;
#line 933 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
FLOAT3D vPos ;
#line 935 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_bActive  = FALSE ;
#line 938 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(m_iExplodingArm  == ARM_RIGHT ){
#line 939 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
MakeRotationMatrixFast  (mRot  , ANGLE3D (0.0f , 0.0f , 0.0f));
#line 940 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
vPos  = FLOAT3D (0.0f , 0.0f , 0.0f);
#line 941 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
GetModelForRendering  () -> GetAttachmentTransformations  (BODY_ATTACHMENT_ARM_RIGHT  , mRot  , vPos  , FALSE );
#line 942 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_plExpArmPos  . pl_PositionVector  = vPos  * GetRotationMatrix  () + GetPlacement  () . pl_PositionVector ;
#line 943 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_plExpArmPos  . pl_OrientationAngle  = GetPlacement  () . pl_OrientationAngle ;
#line 944 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CAttachmentModelObject  & amo0  = * GetModelObject  () -> GetAttachmentModel  (BODY_ATTACHMENT_ARM_RIGHT );
#line 945 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
amo0  . amo_moModelObject  . GetAttachmentTransformations  (ARM_ATTACHMENT_PLASMAGUN  , mRot  , vPos  , FALSE );
#line 946 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_plExpGunPos  . pl_PositionVector  = vPos  * GetRotationMatrix  () + GetPlacement  () . pl_PositionVector ;
#line 947 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_plExpGunPos  . pl_OrientationAngle  = GetPlacement  () . pl_OrientationAngle ;
#line 948 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_vExpDamage  = FLOAT3D (+ 12.0f , 15.0f , 0.0f);
#line 950 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(m_penLeftArmDestroyTarget ){
#line 951 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SendToTarget  (m_penLeftArmDestroyTarget  , EET_TRIGGER  , FixupCausedToPlayer  (this  , m_penEnemy ));
#line 952 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 953 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 956 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(m_iExplodingArm  == ARM_LEFT ){
#line 957 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
MakeRotationMatrixFast  (mRot  , ANGLE3D (0.0f , 0.0f , 0.0f));
#line 958 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
vPos  = FLOAT3D (0.0f , 0.0f , 0.0f);
#line 959 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
GetModelForRendering  () -> GetAttachmentTransformations  (BODY_ATTACHMENT_ARM_LEFT  , mRot  , vPos  , FALSE );
#line 960 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_plExpArmPos  . pl_PositionVector  = vPos  * GetRotationMatrix  () + GetPlacement  () . pl_PositionVector ;
#line 961 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_plExpArmPos  . pl_OrientationAngle  = GetPlacement  () . pl_OrientationAngle ;
#line 962 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_plExpArmPos  . pl_OrientationAngle  (1) += 180.0f;
#line 963 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CAttachmentModelObject  & amo0  = * GetModelObject  () -> GetAttachmentModel  (BODY_ATTACHMENT_ARM_LEFT );
#line 964 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
amo0  . amo_moModelObject  . GetAttachmentTransformations  (ARM_ATTACHMENT_PLASMAGUN  , mRot  , vPos  , FALSE );
#line 965 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_plExpGunPos  . pl_PositionVector  = vPos  * GetRotationMatrix  () + GetPlacement  () . pl_PositionVector ;
#line 966 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_plExpGunPos  . pl_OrientationAngle  = GetPlacement  () . pl_OrientationAngle ;
#line 967 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_vExpDamage  = FLOAT3D (- 12.0f , 15.0f , 0.0f);
#line 969 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(m_penRightArmDestroyTarget ){
#line 970 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SendToTarget  (m_penRightArmDestroyTarget  , EET_TRIGGER  , FixupCausedToPlayer  (this  , m_penEnemy ));
#line 971 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 972 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 973 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_aExpArmRot  = ANGLE3D (FRnd  () * 360.0f - 180.0f , FRnd  () * 360.0f - 180.0f , FRnd  () * 360.0f - 180.0f);
#line 974 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_aExpGunRot  = ANGLE3D (FRnd  () * 360.0f - 180.0f , FRnd  () * 360.0f - 180.0f , FRnd  () * 360.0f - 180.0f);
#line 975 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_vExpDamage  = m_vExpDamage  * GetRotationMatrix  ();
#line 977 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(m_iExplodingArm  == ARM_RIGHT ){m_bRightArmActive  = FALSE ;}
#line 978 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(m_iExplodingArm  == ARM_LEFT ){m_bLeftArmActive  = FALSE ;}
#line 980 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PlaySound  (m_soVoice  , SOUND_ARMDESTROY  , SOF_3D );
#line 982 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CPlacement3D pl  = GetPlacement  ();
#line 983 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
pl  . pl_PositionVector  += FLOAT3D (0.0f , LARVA_HANDLE_TRANSLATE  , 0.0f);
#line 984 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ShakeItBaby  (_pTimer  -> CurrentTick  () , 0.5f , FALSE );
#line 985 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ESpawnEffect  eSpawnEffect ;
#line 986 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnEffect  . colMuliplier  = C_WHITE  | CT_OPAQUE ;
#line 987 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnEffect  . betType  = BET_CANNON ;
#line 988 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnEffect  . vStretch  = FLOAT3D (m_fStretch  * 0.5 , m_fStretch  * 0.5 , m_fStretch  * 0.5);
#line 989 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CEntityPointer penExplosion  = CreateEntity  (pl  , CLASS_BASIC_EFFECT );
#line 990 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
penExplosion  -> Initialize  (eSpawnEffect );
#line 991 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SetTimerAfter(FRnd  () * 0.25f + 0.15f);
Jump(STATE_CURRENT, 0x015a0004, FALSE, EBegin());return TRUE;}BOOL CExotechLarva::H0x015a0004_ArmExplosion_01(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a0004
switch(__eeInput.ee_slEvent) {case EVENTCODE_EBegin: return TRUE;case EVENTCODE_ETimer: Jump(STATE_CURRENT,0x015a0005, FALSE, EInternal()); return TRUE;default: return FALSE; }}BOOL CExotechLarva::H0x015a0005_ArmExplosion_02(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a0005
;
#line 993 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ShakeItBaby  (_pTimer  -> CurrentTick  () , 0.5f , FALSE );
#line 994 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ESpawnEffect  eSpawnEffect ;
#line 995 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnEffect  . colMuliplier  = C_WHITE  | CT_OPAQUE ;
#line 996 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnEffect  . betType  = BET_CANNON ;
#line 997 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnEffect  . vStretch  = FLOAT3D (m_fStretch  , m_fStretch  , m_fStretch );
#line 998 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CPlacement3D plMiddle ;
#line 999 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
plMiddle  . pl_PositionVector  = (m_plExpArmPos  . pl_PositionVector  + m_plExpGunPos  . pl_PositionVector ) / 2.0f;
#line 1000 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
plMiddle  . pl_OrientationAngle  = m_plExpArmPos  . pl_OrientationAngle ;
#line 1001 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CEntityPointer penExplosion  = CreateEntity  (plMiddle  , CLASS_BASIC_EFFECT );
#line 1002 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
penExplosion  -> Initialize  (eSpawnEffect );
#line 1003 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SetTimerAfter(FRnd  () * 0.15f + 0.15f);
Jump(STATE_CURRENT, 0x015a0006, FALSE, EBegin());return TRUE;}BOOL CExotechLarva::H0x015a0006_ArmExplosion_03(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a0006
switch(__eeInput.ee_slEvent) {case EVENTCODE_EBegin: return TRUE;case EVENTCODE_ETimer: Jump(STATE_CURRENT,0x015a0007, FALSE, EInternal()); return TRUE;default: return FALSE; }}BOOL CExotechLarva::H0x015a0007_ArmExplosion_04(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a0007
;
#line 1005 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CPlacement3D pl  = GetPlacement  ();
#line 1006 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
pl  . pl_PositionVector  += FLOAT3D (0.0f , LARVA_HANDLE_TRANSLATE  , 0.0f);
#line 1007 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ShakeItBaby  (_pTimer  -> CurrentTick  () , 1.0f , FALSE );
#line 1008 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ESpawnEffect  eSpawnEffect ;
#line 1009 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnEffect  . colMuliplier  = C_WHITE  | CT_OPAQUE ;
#line 1010 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnEffect  . betType  = BET_CANNON ;
#line 1011 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnEffect  . vStretch  = FLOAT3D (m_fStretch  * 1.5 , m_fStretch  * 1.5 , m_fStretch  * 1.5);
#line 1012 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CEntityPointer penExplosion  = CreateEntity  (pl  , CLASS_BASIC_EFFECT );
#line 1013 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
penExplosion  -> Initialize  (eSpawnEffect );
#line 1014 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnEffect  . betType  = BET_ROCKET ;
#line 1015 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
penExplosion  = CreateEntity  (m_plExpGunPos  , CLASS_BASIC_EFFECT );
#line 1016 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
penExplosion  -> Initialize  (eSpawnEffect );
#line 1018 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SpawnWingDebris  ();
#line 1019 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
RemoveWing  (m_iExplodingArm );
#line 1022 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SetTimerAfter(1.5f);
Jump(STATE_CURRENT, 0x015a0008, FALSE, EBegin());return TRUE;}BOOL CExotechLarva::H0x015a0008_ArmExplosion_05(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a0008
switch(__eeInput.ee_slEvent) {case EVENTCODE_EBegin: return TRUE;case EVENTCODE_ETimer: Jump(STATE_CURRENT,0x015a0009, FALSE, EInternal()); return TRUE;default: return FALSE; }}BOOL CExotechLarva::H0x015a0009_ArmExplosion_06(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a0009
;
#line 1024 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_bExploding  = FALSE ;
#line 1025 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_bActive  = TRUE ;
#line 1028 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SendEvent  (EBegin  ());
#line 1030 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
Return(STATE_CURRENT,EReturn  ());
#line 1030 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
return TRUE; ASSERT(FALSE); return TRUE;};BOOL CExotechLarva::
#line 1033 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
Die(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT STATE_CExotechLarva_Die
  ASSERTMSG(__eeInput.ee_slEvent==EVENTCODE_EDeath, "CExotechLarva::Die expects 'EDeath' as input!");  const EDeath &eDeath = (const EDeath &)__eeInput;
#line 1035 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_penDeathInflictor  = eDeath  . eLastDamage  . penInflictor ;
#line 1037 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_bActive  = FALSE ;
#line 1038 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_iExplosions  = 8;
#line 1040 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PlaySound  (m_soChirp  , SOUND_DEATH  , SOF_3D );
#line 1041 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_soLaser  . Stop  ();
#line 1044 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
Jump(STATE_CURRENT,0x015a000d, FALSE, EInternal());return TRUE;}BOOL CExotechLarva::H0x015a000d_Die_03(const CEntityEvent &__eeInput)
#line 1045 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
{
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a000d
if(!((m_iExplosions  --) > 0)){ Jump(STATE_CURRENT,0x015a000e, FALSE, EInternal());return TRUE;}
#line 1046 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ShakeItBaby  (_pTimer  -> CurrentTick  () , 0.5f , FALSE );
#line 1049 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CPlacement3D plExplosion ;
#line 1050 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
plExplosion  . pl_OrientationAngle  = ANGLE3D (0.0f , 0.0f , 0.0f);
#line 1051 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
plExplosion  . pl_PositionVector  = FLOAT3D (FRnd  () * 2.0 - 1.0f , FRnd  () * 3.0 - 1.5f + LARVA_HANDLE_TRANSLATE  , FRnd  () * 2.0 - 1.0f) * m_fStretch  + GetPlacement  () . pl_PositionVector ;
#line 1052 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
FLOAT vExpSize  = (FRnd  () * 0.7f + 0.7f) * m_fStretch ;
#line 1054 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ESpawnEffect  eSpawnEffect ;
#line 1055 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnEffect  . colMuliplier  = C_WHITE  | CT_OPAQUE ;
#line 1056 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnEffect  . betType  = BET_CANNON ;
#line 1057 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnEffect  . vStretch  = FLOAT3D (vExpSize  , vExpSize  , vExpSize );
#line 1058 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CEntityPointer penExplosion  = CreateEntity  (plExplosion  , CLASS_BASIC_EFFECT );
#line 1059 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
penExplosion  -> Initialize  (eSpawnEffect );
#line 1060 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SetTimerAfter(FRnd  () * 0.05f + 0.35f);
Jump(STATE_CURRENT, 0x015a000b, FALSE, EBegin());return TRUE;}BOOL CExotechLarva::H0x015a000b_Die_01(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a000b
switch(__eeInput.ee_slEvent) {case EVENTCODE_EBegin: return TRUE;case EVENTCODE_ETimer: Jump(STATE_CURRENT,0x015a000c, FALSE, EInternal()); return TRUE;default: return FALSE; }}BOOL CExotechLarva::H0x015a000c_Die_02(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a000c
;Jump(STATE_CURRENT,0x015a000d, FALSE, EInternal());return TRUE;
#line 1061 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}BOOL CExotechLarva::H0x015a000e_Die_04(const CEntityEvent &__eeInput) {
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a000e

#line 1063 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ShakeItBaby  (_pTimer  -> CurrentTick  () , 2.0f , FALSE );
#line 1066 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CPlacement3D plExplosion ;
#line 1067 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
plExplosion  . pl_OrientationAngle  = ANGLE3D (0.0f , 0.0f , 0.0f);
#line 1068 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
plExplosion  . pl_PositionVector  = FLOAT3D (0.0f , - 1.5f + LARVA_HANDLE_TRANSLATE  , 1.5f) * m_fStretch  + GetPlacement  () . pl_PositionVector ;
#line 1069 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ESpawnEffect  eSpawnEffect ;
#line 1070 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnEffect  . colMuliplier  = C_WHITE  | CT_OPAQUE ;
#line 1071 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnEffect  . betType  = BET_CANNON ;
#line 1072 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnEffect  . vStretch  = FLOAT3D (m_fStretch  , m_fStretch  , m_fStretch ) * 2.0f;
#line 1073 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CEntityPointer penExplosion  = CreateEntity  (plExplosion  , CLASS_BASIC_EFFECT );
#line 1074 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
penExplosion  -> Initialize  (eSpawnEffect );
#line 1075 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
plExplosion  . pl_PositionVector  = FLOAT3D (- 1.0f , - 0.2f + LARVA_HANDLE_TRANSLATE  , - 1.5f) * m_fStretch  + GetPlacement  () . pl_PositionVector ;
#line 1076 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
penExplosion  = CreateEntity  (plExplosion  , CLASS_BASIC_EFFECT );
#line 1077 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
penExplosion  -> Initialize  (eSpawnEffect );
#line 1078 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
plExplosion  . pl_PositionVector  = FLOAT3D (1.0f , 1.7f + LARVA_HANDLE_TRANSLATE  , 0.1f) * m_fStretch  + GetPlacement  () . pl_PositionVector ;
#line 1079 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
penExplosion  = CreateEntity  (plExplosion  , CLASS_BASIC_EFFECT );
#line 1080 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
penExplosion  -> Initialize  (eSpawnEffect );
#line 1081 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
plExplosion  . pl_PositionVector  = GetPlacement  () . pl_PositionVector ;
#line 1082 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnEffect  . betType  = BET_ROCKET ;
#line 1083 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
penExplosion  = CreateEntity  (plExplosion  , CLASS_BASIC_EFFECT );
#line 1084 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
penExplosion  -> Initialize  (eSpawnEffect );
#line 1086 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_vExpDamage  = FLOAT3D (0.0f , 15.0f , 0.0f);
#line 1087 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
FLOAT3D vTranslation  = m_vExpDamage ;
#line 1088 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CPlacement3D plDebris  = GetPlacement  ();
#line 1089 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
plDebris  . pl_PositionVector  += FLOAT3D (0.0f , LARVA_HANDLE_TRANSLATE  , 0.0f);
#line 1090 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
Debris_Begin  (EIBT_FLESH  , DPT_BLOODTRAIL  , BET_BLOODSTAIN  , 1.0f , m_vExpDamage  , en_vCurrentTranslationAbsolute  , 5.0f , 2.0f);
#line 1091 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
Debris_Spawn_Independent  (this  , this  , MODEL_DEBRIS_BODY  , TEXTURE_BODY  , 0 , 0 , 0 , 0 , m_fStretch  , 
#line 1092 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
plDebris  , vTranslation  , ANGLE3D (45.0f , 230.0f , 0.0f));
#line 1093 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
vTranslation  += FLOAT3D (FRnd  () * 4.0f - 2.0f , FRnd  () * 4.0f - 2.0f , FRnd  () * 4.0f - 2.0f);
#line 1094 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
Debris_Spawn_Independent  (this  , this  , MODEL_DEBRIS_TAIL01  , TEXTURE_BODY  , 0 , 0 , 0 , 0 , m_fStretch  , 
#line 1095 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
plDebris  , vTranslation  , ANGLE3D (15.0f , 130.0f , 0.0f));
#line 1096 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
vTranslation  += FLOAT3D (FRnd  () * 4.0f - 2.0f , FRnd  () * 4.0f - 2.0f , FRnd  () * 4.0f - 2.0f);
#line 1097 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
Debris_Spawn_Independent  (this  , this  , MODEL_DEBRIS_TAIL02  , TEXTURE_BODY  , 0 , 0 , 0 , 0 , m_fStretch  , 
#line 1098 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
plDebris  , vTranslation  , ANGLE3D (145.0f , 30.0f , 0.0f));
#line 1099 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
for(INDEX i  = 0;i  < 8;i  ++){
#line 1100 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
Debris_Spawn  (this  , this  , MODEL_DEBRIS_FLESH  , TEXTURE_DEBRIS_FLESH  , 0 , 0 , 0 , 0 , m_fStretch  , 
#line 1101 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
FLOAT3D (FRnd  () * 0.6f + 0.2f , FRnd  () * 0.6f + 0.2f + LARVA_HANDLE_TRANSLATE  , FRnd  () * 0.6f + 0.2f));
#line 1102 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 1105 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnEffect  . colMuliplier  = C_WHITE  | CT_OPAQUE ;
#line 1106 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnEffect  . betType  = BET_EXPLOSION_DEBRIS ;
#line 1107 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnEffect  . vStretch  = FLOAT3D (1 , 1 , 1);
#line 1108 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
penExplosion  = CreateEntity  (plExplosion  , CLASS_BASIC_EFFECT );
#line 1109 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
penExplosion  -> Initialize  (eSpawnEffect );
#line 1111 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eSpawnEffect  . betType  = BET_EXPLOSION_SMOKE ;
#line 1112 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
penExplosion  = CreateEntity  (plExplosion  , CLASS_BASIC_EFFECT );
#line 1113 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
penExplosion  -> Initialize  (eSpawnEffect );
#line 1115 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
EDeath  eDeath ;
#line 1116 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eDeath  . eLastDamage  . penInflictor  = m_penDeathInflictor ;
#line 1118 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
EActivateBeam  eab ;
#line 1119 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eab  . bTurnOn  = FALSE ;
#line 1120 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_penRecharger  -> SendEvent  (eab );
#line 1122 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(m_penDeathTarget ){
#line 1123 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SendToTarget  (m_penDeathTarget  , EET_TRIGGER  , FixupCausedToPlayer  (this  , m_penEnemy ));
#line 1124 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 1126 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
Jump(STATE_CURRENT, STATE_CEnemyBase_Die, FALSE, eDeath );return TRUE; ASSERT(FALSE); return TRUE;};BOOL CExotechLarva::
#line 1130 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
Fire(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT STATE_CExotechLarva_Fire
  ASSERTMSG(__eeInput.ee_slEvent==EVENTCODE_EVoid, "CExotechLarva::Fire expects 'EVoid' as input!");  const EVoid &e = (const EVoid &)__eeInput;
#line 1132 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
UpdateFiringPos  ();
#line 1134 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(!(m_bLeftArmActive  || m_bRightArmActive )){ Jump(STATE_CURRENT,0x015a001d, FALSE, EInternal());return TRUE;}
#line 1135 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_iRnd  = IRnd  () % 9;
#line 1136 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(m_iRnd  > 6 && ! m_bRechargePose  && GetHealth  () > 0.1f * m_fMaxHealth ){
#line 1137 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PlaySound  (m_soFire3  , SOUND_FIRE_TAIL  , SOF_3D );
#line 1138 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ShootTailProjectile  ();
#line 1139 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 1140 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(m_iRnd  > 6 && m_bRechargePose ){
#line 1141 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_iRnd  = 3;
#line 1142 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 1144 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(m_iRnd  > 3){
#line 1145 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
Return(STATE_CURRENT,EReturn  ());
#line 1145 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
return TRUE;
#line 1146 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 1148 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
Jump(STATE_CURRENT,0x015a001a, FALSE, EInternal());return TRUE;}BOOL CExotechLarva::H0x015a001a_Fire_11(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a001a
if(!(m_iRnd  > 0)){ Jump(STATE_CURRENT,0x015a001b, FALSE, EInternal());return TRUE;}
#line 1149 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(!(m_bLeftArmActive )){ Jump(STATE_CURRENT,0x015a0014, FALSE, EInternal());return TRUE;}
#line 1150 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PlaySound  (m_soFire1  , SOUND_FIRE_PLASMA  , SOF_3D );
#line 1151 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ShootProjectile  (PRT_LARVA_PLASMA  , m_vFirePosLeftPlasmaRel  , ANGLE3D (0 , 0 , 0));
#line 1152 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
RemoveAttachmentFromModel  (* PlasmaLeftModel  () , PLASMAGUN_ATTACHMENT_PROJECTILE );
#line 1153 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SetTimerAfter(0.25f);
Jump(STATE_CURRENT, 0x015a0010, FALSE, EBegin());return TRUE;}BOOL CExotechLarva::H0x015a0010_Fire_01(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a0010
switch(__eeInput.ee_slEvent) {case EVENTCODE_EBegin: return TRUE;case EVENTCODE_ETimer: Jump(STATE_CURRENT,0x015a0011, FALSE, EInternal()); return TRUE;default: return FALSE; }}BOOL CExotechLarva::H0x015a0011_Fire_02(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a0011
;
#line 1154 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PlasmaLeftModel  () -> PlayAnim  (PLASMAGUN_ANIM_SPAWNING  , 0);
#line 1155 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SetTimerAfter(0.25f);
Jump(STATE_CURRENT, 0x015a0012, FALSE, EBegin());return TRUE;}BOOL CExotechLarva::H0x015a0012_Fire_03(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a0012
switch(__eeInput.ee_slEvent) {case EVENTCODE_EBegin: return TRUE;case EVENTCODE_ETimer: Jump(STATE_CURRENT,0x015a0013, FALSE, EInternal()); return TRUE;default: return FALSE; }}BOOL CExotechLarva::H0x015a0013_Fire_04(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a0013
;
#line 1156 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
AddAttachmentToModel  (this  , * PlasmaLeftModel  () , PLASMAGUN_ATTACHMENT_PROJECTILE  , MODEL_PLASMA  , TEXTURE_PLASMA  , 0 , 0 , 0);
#line 1157 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CAttachmentModelObject  * amo  = PlasmaLeftModel  () -> GetAttachmentModel  (BODY_ATTACHMENT_ARM_LEFT );
#line 1158 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
amo  -> amo_moModelObject  . StretchModel  (FLOAT3D (m_fStretch  , m_fStretch  , m_fStretch ));Jump(STATE_CURRENT,0x015a0014, FALSE, EInternal());return TRUE;}BOOL CExotechLarva::H0x015a0014_Fire_05(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a0014

#line 1160 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(!(m_bRightArmActive )){ Jump(STATE_CURRENT,0x015a0019, FALSE, EInternal());return TRUE;}
#line 1161 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PlaySound  (m_soFire2  , SOUND_FIRE_PLASMA  , SOF_3D );
#line 1162 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ShootProjectile  (PRT_LARVA_PLASMA  , m_vFirePosRightPlasmaRel  , ANGLE3D (0 , 0 , 0));
#line 1163 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
RemoveAttachmentFromModel  (* PlasmaRightModel  () , PLASMAGUN_ATTACHMENT_PROJECTILE );
#line 1164 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SetTimerAfter(0.25f);
Jump(STATE_CURRENT, 0x015a0015, FALSE, EBegin());return TRUE;}BOOL CExotechLarva::H0x015a0015_Fire_06(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a0015
switch(__eeInput.ee_slEvent) {case EVENTCODE_EBegin: return TRUE;case EVENTCODE_ETimer: Jump(STATE_CURRENT,0x015a0016, FALSE, EInternal()); return TRUE;default: return FALSE; }}BOOL CExotechLarva::H0x015a0016_Fire_07(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a0016
;
#line 1165 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PlasmaRightModel  () -> PlayAnim  (PLASMAGUN_ANIM_SPAWNING  , 0);
#line 1166 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SetTimerAfter(0.25f);
Jump(STATE_CURRENT, 0x015a0017, FALSE, EBegin());return TRUE;}BOOL CExotechLarva::H0x015a0017_Fire_08(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a0017
switch(__eeInput.ee_slEvent) {case EVENTCODE_EBegin: return TRUE;case EVENTCODE_ETimer: Jump(STATE_CURRENT,0x015a0018, FALSE, EInternal()); return TRUE;default: return FALSE; }}BOOL CExotechLarva::H0x015a0018_Fire_09(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a0018
;
#line 1167 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
AddAttachmentToModel  (this  , * PlasmaRightModel  () , PLASMAGUN_ATTACHMENT_PROJECTILE  , MODEL_PLASMA  , TEXTURE_PLASMA  , 0 , 0 , 0);
#line 1168 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CAttachmentModelObject  * amo  = PlasmaRightModel  () -> GetAttachmentModel  (BODY_ATTACHMENT_ARM_LEFT );
#line 1169 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
amo  -> amo_moModelObject  . StretchModel  (FLOAT3D (m_fStretch  , m_fStretch  , m_fStretch ));Jump(STATE_CURRENT,0x015a0019, FALSE, EInternal());return TRUE;}BOOL CExotechLarva::H0x015a0019_Fire_10(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a0019

#line 1171 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_iRnd  --;Jump(STATE_CURRENT,0x015a001a, FALSE, EInternal());return TRUE;
#line 1172 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}BOOL CExotechLarva::H0x015a001b_Fire_12(const CEntityEvent &__eeInput) {
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a001b
Jump(STATE_CURRENT,0x015a001c, FALSE, EInternal());return TRUE;}BOOL CExotechLarva::H0x015a001d_Fire_14(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a001d
if(TRUE ){
#line 1175 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_iRnd  = IRnd  () % 10;
#line 1176 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(m_iRnd  > 6 && ! m_bRechargePose  && GetHealth  () > 0.1f * m_fMaxHealth ){
#line 1177 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PlaySound  (m_soFire3  , SOUND_FIRE_TAIL  , SOF_3D );
#line 1178 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ShootTailProjectile  ();
#line 1179 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 1180 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(m_iRnd  < 4 && _pTimer  -> CurrentTick  () > m_tmDontFireLaserBefore ){
#line 1181 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PlaySound  (m_soLaser  , SOUND_LASER_CHARGE  , SOF_3D );
#line 1182 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SpawnReminder  (this  , 3.0f , 129);
#line 1183 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_tmDontFireLaserBefore  = _pTimer  -> CurrentTick  () + m_fMinimumLaserWait ;
#line 1184 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 1185 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}Jump(STATE_CURRENT,0x015a001c, FALSE, EInternal());return TRUE;}
BOOL CExotechLarva::H0x015a001c_Fire_13(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a001c

#line 1187 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PerhapsChangeTarget  ();
#line 1189 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
Return(STATE_CURRENT,EReturn  ());
#line 1189 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
return TRUE; ASSERT(FALSE); return TRUE;};BOOL CExotechLarva::
#line 1192 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
Hit(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT STATE_CExotechLarva_Hit
  ASSERTMSG(__eeInput.ee_slEvent==EVENTCODE_EVoid, "CExotechLarva::Hit expects 'EVoid' as input!");  const EVoid &e = (const EVoid &)__eeInput;
#line 1193 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
Return(STATE_CURRENT,EReturn  ());
#line 1193 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
return TRUE; ASSERT(FALSE); return TRUE;};BOOL CExotechLarva::
#line 1196 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
BeIdle(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT STATE_CExotechLarva_BeIdle
  ASSERTMSG(__eeInput.ee_slEvent==EVENTCODE_EVoid, "CExotechLarva::BeIdle expects 'EVoid' as input!");  const EVoid &e = (const EVoid &)__eeInput;
#line 1198 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PerhapsChangeTarget  ();
#line 1200 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SetTimerAfter(0.5f);
Jump(STATE_CURRENT, 0x015a0020, FALSE, EBegin());return TRUE;}BOOL CExotechLarva::H0x015a0020_BeIdle_01(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a0020
switch(__eeInput.ee_slEvent) {case EVENTCODE_EBegin: return TRUE;case EVENTCODE_ETimer: Jump(STATE_CURRENT,0x015a0021, FALSE, EInternal()); return TRUE;default: return FALSE; }}BOOL CExotechLarva::H0x015a0021_BeIdle_02(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a0021
;
#line 1202 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
Jump(STATE_CURRENT,0x015a0024, FALSE, EInternal());return TRUE;}BOOL CExotechLarva::H0x015a0024_BeIdle_05(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a0024
if(!(TRUE )){ Jump(STATE_CURRENT,0x015a0025, FALSE, EInternal());return TRUE;}
#line 1203 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
FindNewTarget  ();
#line 1204 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SendEvent  (EReconsiderBehavior  ());
#line 1205 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SetTimerAfter(0.5f);
Jump(STATE_CURRENT, 0x015a0022, FALSE, EBegin());return TRUE;}BOOL CExotechLarva::H0x015a0022_BeIdle_03(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a0022
switch(__eeInput.ee_slEvent) {case EVENTCODE_EBegin: return TRUE;case EVENTCODE_ETimer: Jump(STATE_CURRENT,0x015a0023, FALSE, EInternal()); return TRUE;default: return FALSE; }}BOOL CExotechLarva::H0x015a0023_BeIdle_04(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a0023
;Jump(STATE_CURRENT,0x015a0024, FALSE, EInternal());return TRUE;
#line 1206 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}BOOL CExotechLarva::H0x015a0025_BeIdle_06(const CEntityEvent &__eeInput) {
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a0025
 ASSERT(FALSE); return TRUE;};BOOL CExotechLarva::
#line 1210 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
LarvaLoop(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT STATE_CExotechLarva_LarvaLoop
  ASSERTMSG(__eeInput.ee_slEvent==EVENTCODE_EVoid, "CExotechLarva::LarvaLoop expects 'EVoid' as input!");  const EVoid &e = (const EVoid &)__eeInput;
#line 1212 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
FindNewTarget  ();
#line 1213 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SendEvent  (EReconsiderBehavior  ());
#line 1215 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
StartModelAnim  (BODY_ANIM_IDLE  , AOF_SMOOTHCHANGE  | AOF_LOOPING );
#line 1217 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SpawnReminder  (this  , 0.5f , 128);
#line 1218 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SpawnReminder  (this  , 0.5f , 145);
#line 1219 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SetTimerAt(THINKTIME_NEVER);
Jump(STATE_CURRENT, 0x015a0027, FALSE, EBegin());return TRUE;}BOOL CExotechLarva::H0x015a0027_LarvaLoop_01(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a0027
switch(__eeInput.ee_slEvent){case(EVENTCODE_EBegin):
#line 1221 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
{const EBegin&e= (EBegin&)__eeInput;

#line 1222 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(! m_bLeftArmActive  && ! m_bRightArmActive ){
#line 1223 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CModelObject & amo  = GetModelObject  () -> GetAttachmentModel  (BODY_ATTACHMENT_BACKARMS ) -> amo_moModelObject ;
#line 1224 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
amo  . PlayAnim  (BACKARMS_ANIM_ACTIVATING  , AOF_SMOOTHCHANGE  | AOF_NORESTART );
#line 1225 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PlaySound  (m_soFire1  , SOUND_DEPLOYLASER  , SOF_3D );
#line 1226 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SpawnReminder  (this  , amo  . GetAnimLength  (BACKARMS_ANIM_ACTIVATING ) , 160);
#line 1227 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 1228 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
Call(STATE_CURRENT, STATE_CEnemyBase_MainLoop, FALSE, EVoid());return TRUE;
#line 1229 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}ASSERT(FALSE);break;case(EVENTCODE_ELarvaArmDestroyed):
#line 1232 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
{const ELarvaArmDestroyed&ead= (ELarvaArmDestroyed&)__eeInput;

#line 1233 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_iExplodingArm  = ead  . iArm ;
#line 1234 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
Call(STATE_CURRENT, STATE_CExotechLarva_ArmExplosion, TRUE, EVoid());return TRUE;
#line 1235 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}ASSERT(FALSE);break;case(EVENTCODE_ELarvaRechargePose):
#line 1238 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
{const ELarvaRechargePose&elrp= (ELarvaRechargePose&)__eeInput;

#line 1239 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(elrp  . bStart  == TRUE  && m_bRechargePose  != TRUE ){
#line 1240 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
StartModelAnim  (BODY_ANIM_TORECHARGING  , AOF_SMOOTHCHANGE  | AOF_NORESTART );
#line 1241 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SpawnReminder  (this  , GetModelObject  () -> GetAnimLength  (BODY_ANIM_TORECHARGING ) , 156);
#line 1242 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 1243 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(elrp  . bStart  == FALSE  && m_bRechargePose  != FALSE ){
#line 1244 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
StartModelAnim  (BODY_ANIM_FROMRECHARGING  , AOF_SMOOTHCHANGE  | AOF_NORESTART );
#line 1245 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SpawnReminder  (this  , GetModelObject  () -> GetAnimLength  (BODY_ANIM_FROMRECHARGING ) , 157);
#line 1246 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 1247 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
return TRUE;
#line 1248 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}ASSERT(FALSE);break;case(EVENTCODE_EReminder):
#line 1251 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
{const EReminder&er= (EReminder&)__eeInput;

#line 1253 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(er  . iValue  == 128){
#line 1255 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(RechargerActive  ()){
#line 1256 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SpawnReminder  (this  , 1.0f , 128);
#line 1257 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}else {
#line 1258 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_bRecharging  = FALSE ;
#line 1259 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_ltTarget  = LT_ENEMY ;
#line 1261 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ELarvaRechargePose  elrp ;
#line 1262 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
elrp  . bStart  = FALSE ;
#line 1263 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SendEvent  (elrp );
#line 1264 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 1266 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(m_bActive  && m_bRecharging  && DistanceXZ  (this  , m_penRecharger ) < 5.0f){
#line 1267 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(m_bRechargePose ){
#line 1268 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(((CExotechLarvaCharger  *) & * m_penRecharger ) -> m_bBeamActive )
#line 1269 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
{
#line 1270 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(! m_bRechargedAtLeastOnce ){
#line 1271 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(m_penFirstRechargeTarget ){
#line 1272 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SendToTarget  (m_penFirstRechargeTarget  , EET_TRIGGER  , FixupCausedToPlayer  (this  , m_penEnemy ));
#line 1273 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 1274 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_bRechargedAtLeastOnce  = TRUE ;
#line 1275 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 1276 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SetHealth  (ClampUp  (GetHealth  () + m_fRechargePerSecond  , m_fMaxHealth  * m_fMaxRechargedHealth ));
#line 1277 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(GetHealth  () > m_fMaxHealth  * 0.95){
#line 1278 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_ltTarget  = LT_ENEMY ;
#line 1279 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_bRecharging  = FALSE ;
#line 1281 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
EActivateBeam  eab ;
#line 1282 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eab  . bTurnOn  = FALSE ;
#line 1283 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_penRecharger  -> SendEvent  (eab );
#line 1285 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ELarvaRechargePose  elrp ;
#line 1286 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
elrp  . bStart  = FALSE ;
#line 1287 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SendEvent  (elrp );
#line 1288 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 1289 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}else if(TRUE ){
#line 1290 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
EActivateBeam  eab ;
#line 1291 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
eab  . bTurnOn  = TRUE ;
#line 1292 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_penRecharger  -> SendEvent  (eab );
#line 1293 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 1294 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}else {
#line 1295 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ELarvaRechargePose  elrp ;
#line 1296 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
elrp  . bStart  = TRUE ;
#line 1297 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SendEvent  (elrp );
#line 1298 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 1299 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 1301 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
else if(TRUE ){
#line 1302 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(GetHealth  () < (m_fLarvaHealth  * 0.7f)){
#line 1303 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(! RechargerActive  ()){
#line 1304 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_ltTarget  = LT_ENEMY ;
#line 1305 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}else {
#line 1306 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_bRecharging  = TRUE ;
#line 1307 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_ltTarget  = LT_RECHARGER ;
#line 1308 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 1309 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 1310 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 1311 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
return TRUE;
#line 1313 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}else if(er  . iValue  == 145){
#line 1314 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
FindNewTarget  ();
#line 1315 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(AnyPlayerCloserThen  (9.0f) && GetHealth  () > 0.1f * m_fMaxHealth ){
#line 1316 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
UpdateFiringPos  ();
#line 1317 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PlaySound  (m_soFire3  , SOUND_FIRE_TAIL  , SOF_3D );
#line 1318 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ShootTailProjectile  ();
#line 1319 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 1320 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
else if(m_penEnemy  && GetHealth  () > 0.1f * m_fMaxHealth ){
#line 1321 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(! IsVisible  (m_penEnemy )){
#line 1322 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
INDEX iRnd  = IRnd  () % 6;
#line 1323 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(iRnd  > 4){
#line 1324 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
UpdateFiringPos  ();
#line 1325 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PlaySound  (m_soFire3  , SOUND_FIRE_TAIL  , SOF_3D );
#line 1326 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ShootTailProjectile  ();
#line 1327 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 1328 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 1329 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 1330 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SpawnReminder  (this  , 0.5f , 145);
#line 1331 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
return TRUE;
#line 1333 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}else if(er  . iValue  == 129){
#line 1334 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(m_bActive  && m_bLaserActive ){FireLaser  ();}
#line 1335 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SpawnReminder  (this  , 0.35f , 130);
#line 1336 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
return TRUE;
#line 1338 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}else if(er  . iValue  == 130){
#line 1339 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(m_bActive ){ExplodeLaser  ();}
#line 1340 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SpawnReminder  (this  , 0.75f , 131);
#line 1341 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
return TRUE;
#line 1343 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}else if(er  . iValue  == 131){
#line 1344 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_bRenderLeftLaser  = FALSE ;
#line 1345 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_bRenderRightLaser  = FALSE ;
#line 1346 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
return TRUE;
#line 1348 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}else if(er  . iValue  == 156){
#line 1349 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_bRechargePose  = TRUE ;
#line 1350 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
StartModelAnim  (BODY_ANIM_RECHARGING  , AOF_SMOOTHCHANGE  | AOF_LOOPING );
#line 1351 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
return TRUE;
#line 1353 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}else if(er  . iValue  == 157){
#line 1354 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_bRechargePose  = FALSE ;
#line 1355 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
StartModelAnim  (BODY_ANIM_IDLE  , AOF_SMOOTHCHANGE  | AOF_LOOPING );
#line 1357 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}else if(er  . iValue  == 160){
#line 1358 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CModelObject & amo  = GetModelObject  () -> GetAttachmentModel  (BODY_ATTACHMENT_BACKARMS ) -> amo_moModelObject ;
#line 1359 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
amo  . PlayAnim  (BACKARMS_ANIM_ACTIVE  , AOF_SMOOTHCHANGE  | AOF_LOOPING );
#line 1360 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_bLaserActive  = TRUE ;
#line 1361 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 1362 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
return TRUE;
#line 1363 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}ASSERT(FALSE);break;default: return FALSE; break;
#line 1364 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}return TRUE;}BOOL CExotechLarva::H0x015a0028_LarvaLoop_02(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a0028
 ASSERT(FALSE); return TRUE;};BOOL CExotechLarva::
#line 1367 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
Main(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT STATE_CExotechLarva_Main
  ASSERTMSG(__eeInput.ee_slEvent==EVENTCODE_EVoid, "CExotechLarva::Main expects 'EVoid' as input!");  const EVoid &e = (const EVoid &)__eeInput;
#line 1369 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
InitAsModel  ();
#line 1370 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SetPhysicsFlags  (EPF_MODEL_FLYING  | EPF_HASLUNGS  | EPF_ABSOLUTETRANSLATE );
#line 1371 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SetCollisionFlags  (ECF_MODEL );
#line 1372 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SetFlags  (GetFlags  () | ENF_ALIVE );
#line 1373 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
en_fDensity  = 2000.0f;
#line 1376 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SetModel  (MODEL_BODY );
#line 1377 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SetModelMainTexture  (TEXTURE_BODY );
#line 1380 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
AddAttachmentToModel  (this  , * GetModelObject  () , BODY_ATTACHMENT_ARM_LEFT  , MODEL_WING  , TEXTURE_WING  , 0 , 0 , 0);
#line 1381 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CModelObject & amo0  = GetModelObject  () -> GetAttachmentModel  (BODY_ATTACHMENT_ARM_LEFT ) -> amo_moModelObject ;
#line 1382 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
AddAttachmentToModel  (this  , amo0  , ARM_ATTACHMENT_PLASMAGUN  , MODEL_PLASMAGUN  , TEXTURE_PLASMAGUN  , 0 , 0 , 0);
#line 1385 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
AddAttachmentToModel  (this  , * GetModelObject  () , BODY_ATTACHMENT_ARM_RIGHT  , MODEL_WING  , TEXTURE_WING  , 0 , 0 , 0);
#line 1386 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CModelObject & amo1  = GetModelObject  () -> GetAttachmentModel  (BODY_ATTACHMENT_ARM_RIGHT ) -> amo_moModelObject ;
#line 1387 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
amo1  . StretchModel  (FLOAT3D (- 1.0f , 1.0f , 1.0f));
#line 1388 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
AddAttachmentToModel  (this  , amo1  , ARM_ATTACHMENT_PLASMAGUN  , MODEL_PLASMAGUN  , TEXTURE_PLASMAGUN  , 0 , 0 , 0);
#line 1389 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CModelObject & amo2  = amo1  . GetAttachmentModel  (ARM_ATTACHMENT_PLASMAGUN ) -> amo_moModelObject ;
#line 1390 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
amo2  . StretchModel  (FLOAT3D (- 1.0f , 1.0f , 1.0f));
#line 1393 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
AddAttachmentToModel  (this  , * GetModelObject  () , BODY_ATTACHMENT_BACKARMS  , MODEL_BLADES  , TEXTURE_BODY  , 0 , 0 , 0);
#line 1396 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
AddAttachmentToModel  (this  , * GetModelObject  () , BODY_ATTACHMENT_EXOTECHLARVA  , MODEL_EXOTECHLARVA  , TEXTURE_EXOTECHLARVA  , 0 , 0 , 0);
#line 1397 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
CModelObject & amo3  = GetModelObject  () -> GetAttachmentModel  (BODY_ATTACHMENT_EXOTECHLARVA ) -> amo_moModelObject ;
#line 1398 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
AddAttachmentToModel  (this  , amo3  , EXOTECHLARVA_ATTACHMENT_BEAM  , MODEL_BEAM  , TEXTURE_BEAM  , 0 , 0 , 0);
#line 1399 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
AddAttachmentToModel  (this  , amo3  , EXOTECHLARVA_ATTACHMENT_ENERGYBEAMS  , MODEL_ENERGYBEAMS  , TEXTURE_ENERGYBEAMS  , 0 , 0 , 0);
#line 1400 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
AddAttachmentToModel  (this  , amo3  , EXOTECHLARVA_ATTACHMENT_FLARE  , MODEL_FLARE  , TEXTURE_FLARE  , 0 , 0 , 0);
#line 1402 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
AddAttachmentToModel  (this  , * PlasmaLeftModel  () , PLASMAGUN_ATTACHMENT_PROJECTILE  , MODEL_PLASMA  , TEXTURE_PLASMA  , 0 , 0 , 0);
#line 1403 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
AddAttachmentToModel  (this  , * PlasmaRightModel  () , PLASMAGUN_ATTACHMENT_PROJECTILE  , MODEL_PLASMA  , TEXTURE_PLASMA  , 0 , 0 , 0);
#line 1406 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
GetModelObject  () -> StretchModelRelative  (FLOAT3D (m_fStretch  , m_fStretch  , m_fStretch ));
#line 1408 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_vFirePosLeftPlasmaRel  = FIREPOS_PLASMA_LEFT  * m_fStretch ;
#line 1409 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_vFirePosRightPlasmaRel  = FIREPOS_PLASMA_RIGHT  * m_fStretch ;
#line 1411 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_vFirePosTailRel  = FIREPOS_TAIL  * m_fStretch ;
#line 1414 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_bBoss  = TRUE ;
#line 1417 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_fWalkSpeed  = 0.0f;
#line 1418 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_aWalkRotateSpeed  = 100.0f;
#line 1419 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_fAttackRunSpeed  = 7.5f;
#line 1420 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_aAttackRotateSpeed  = 100.0f;
#line 1422 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_fStopDistance  = m_fStopRadius ;
#line 1423 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_fBlowUpAmount  = 100.0f;
#line 1424 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_fBodyParts  = 0;
#line 1425 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_fDamageWounded  = 0.0f;
#line 1426 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_iScore  = 750000;
#line 1427 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_sptType  = SPT_BLOOD ;
#line 1428 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_fAttackDistance  = 100.0f;
#line 1429 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_fCloseDistance  = 0.0f;
#line 1431 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_fAttackFireTime  = 0.5f;
#line 1432 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_fCloseFireTime  = 0.5f;
#line 1435 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
en_fAcceleration  = UpperLimit  (1.0f);
#line 1436 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
en_fDeceleration  = UpperLimit  (1.0f);
#line 1439 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SetHealth  (m_fLarvaHealth );
#line 1440 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_fMaxHealth  = m_fLarvaHealth ;
#line 1442 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_bActive  = TRUE ;
#line 1443 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_bExploding  = FALSE ;
#line 1444 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_bLaserActive  = FALSE ;
#line 1449 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
ModelChangeNotify  ();
#line 1450 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
StandingAnim  ();
#line 1452 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SetTimerAfter(0.05f);
Jump(STATE_CURRENT, 0x015a0029, FALSE, EBegin());return TRUE;}BOOL CExotechLarva::H0x015a0029_Main_01(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a0029
switch(__eeInput.ee_slEvent) {case EVENTCODE_EBegin: return TRUE;case EVENTCODE_ETimer: Jump(STATE_CURRENT,0x015a002a, FALSE, EInternal()); return TRUE;default: return FALSE; }}BOOL CExotechLarva::H0x015a002a_Main_02(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a002a
;
#line 1455 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_bInvulnerable  = TRUE ;
#line 1457 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
if(! DoSafetyChecks  ()){
#line 1458 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
Destroy  ();
#line 1459 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
Return(STATE_CURRENT,EVoid());
#line 1459 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
return TRUE;
#line 1460 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}
#line 1463 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SetTimerAt(THINKTIME_NEVER);
Jump(STATE_CURRENT, 0x015a002b, FALSE, EBegin());return TRUE;}BOOL CExotechLarva::H0x015a002b_Main_03(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a002b
switch(__eeInput.ee_slEvent){case(EVENTCODE_EBegin):{const EBegin&e= (EBegin&)__eeInput;
return TRUE;}ASSERT(FALSE);break;case(EVENTCODE_ETrigger):{const ETrigger&e= (ETrigger&)__eeInput;
UnsetTimer();Jump(STATE_CURRENT,0x015a002c, FALSE, EInternal());return TRUE;}ASSERT(FALSE);break;default:{return TRUE;}ASSERT(FALSE);break;
#line 1467 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}return TRUE;}BOOL CExotechLarva::H0x015a002c_Main_04(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a002c

#line 1469 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
PlaySound  (m_soChirp  , SOUND_CHIRP  , SOF_3D  | SOF_LOOP );
#line 1472 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
Jump(STATE_CURRENT,0x015a002f, FALSE, EInternal());return TRUE;}BOOL CExotechLarva::H0x015a002f_Main_07(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a002f
if(!(DistanceTo  (this  , m_penMarkerNew ) > 5.0f)){ Jump(STATE_CURRENT,0x015a0030, FALSE, EInternal());return TRUE;}
#line 1473 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SetTimerAfter(0.05f);
Jump(STATE_CURRENT, 0x015a002d, FALSE, EBegin());return TRUE;}BOOL CExotechLarva::H0x015a002d_Main_05(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a002d
switch(__eeInput.ee_slEvent){case(EVENTCODE_EBegin):{const EBegin&e= (EBegin&)__eeInput;
return TRUE;}ASSERT(FALSE);break;case(EVENTCODE_ETimer):{const ETimer&e= (ETimer&)__eeInput;

#line 1476 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
FLOAT3D vToMarker  = m_penMarkerNew  -> GetPlacement  () . pl_PositionVector  - GetPlacement  () . pl_PositionVector ;
#line 1477 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
vToMarker  . Normalize  ();
#line 1478 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
SetDesiredTranslation  (vToMarker  * m_fAttackRunSpeed );
#line 1479 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
UnsetTimer();Jump(STATE_CURRENT,0x015a002e, FALSE, EInternal());return TRUE;
#line 1480 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}ASSERT(FALSE);break;default: return FALSE; break;
#line 1481 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}return TRUE;}BOOL CExotechLarva::H0x015a002e_Main_06(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a002e
Jump(STATE_CURRENT,0x015a002f, FALSE, EInternal());return TRUE;
#line 1482 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
}BOOL CExotechLarva::H0x015a0030_Main_08(const CEntityEvent &__eeInput) {
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x015a0030

#line 1484 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
m_bInvulnerable  = FALSE ;
#line 1487 "C:/MyMod/Sources/EntitiesMP/ExotechLarva.es"
Jump(STATE_CURRENT, STATE_CExotechLarva_LarvaLoop, TRUE, EVoid());return TRUE; ASSERT(FALSE); return TRUE;};